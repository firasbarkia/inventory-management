{
  "info": {
    "name": "Inventory Management API - Role Workflows",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": "Postman collection demonstrating workflows for different user roles in the Inventory Management API."
  },
  "item": [
    {
      "name": "1. Authentication (Common)",
      "item": [
        {
          "name": "Register Admin User",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"admin_user\",\n  \"password\": \"adminpass\",\n  \"email\": \"admin@example.com\",\n  \"roles\": [\"ADMIN\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/register",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "register"]
            }
          }
        },
        {
          "name": "Register Worker User",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"worker_user\",\n  \"password\": \"workerpass\",\n  \"email\": \"worker@example.com\",\n  \"roles\": [\"WORKER\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/register",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "register"]
            }
          }
        },
        {
          "name": "Login User (Admin/Worker)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"admin_user\",\n  \"password\": \"adminpass\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/login",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "login"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "var token = pm.response.text();",
                  "pm.environment.set(\"jwt_token\", token);",
                  "console.log(\"JWT Token set: \", token);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "2. Admin Workflow",
      "description": "Requires ADMIN role. Login first using the 'Login User' request.",
      "item": [
        {
          "name": "Users Management",
          "item": [
             {
              "name": "Get All Users",
              "request": {
                "method": "GET",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/admin/users",
                  "host": ["{{base_url}}"],
                  "path": ["api", "admin", "users"]
                }
              }
            },
            {
              "name": "Create User (e.g., another Worker)",
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{jwt_token}}" },
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"username\": \"new_worker\",\n  \"password\": \"newpass\",\n  \"email\": \"new_worker@example.com\",\n  \"roles\": [\"WORKER\"]\n}"
                },
                "url": {
                  "raw": "{{base_url}}/api/admin/users",
                  "host": ["{{base_url}}"],
                  "path": ["api", "admin", "users"]
                }
              }
            }
          ]
        },
        {
          "name": "Suppliers Management",
          "item": [
            {
              "name": "Get All Suppliers",
              "request": {
                "method": "GET",
                "header": [
                   { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/suppliers",
                  "host": ["{{base_url}}"],
                  "path": ["api", "suppliers"]
                }
              }
            },
            {
              "name": "Get Supplier By ID",
              "request": {
                "method": "GET",
                "header": [
                   { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/suppliers/{{supplier_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["api", "suppliers", "{{supplier_id}}"],
                  "variable": [ { "key": "supplier_id", "value": "1" } ]
                }
              }
            },
            {
              "name": "Create Supplier",
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{jwt_token}}" },
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Supplier B\",\n  \"contactInfo\": \"supplierB@contact.com\",\n  \"email\": \"orders@supplierb.com\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/api/suppliers",
                  "host": ["{{base_url}}"],
                  "path": ["api", "suppliers"]
                }
              }
            },
            {
              "name": "Update Supplier",
              "request": {
                "method": "PUT",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{jwt_token}}" },
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Updated Supplier B\",\n  \"contactInfo\": \"newcontact@supplierb.com\",\n  \"email\": \"neworders@supplierb.com\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/api/suppliers/{{supplier_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["api", "suppliers", "{{supplier_id}}"],
                  "variable": [ { "key": "supplier_id", "value": "1" } ]
                }
              }
            },
            {
              "name": "Delete Supplier",
              "request": {
                "method": "DELETE",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/suppliers/{{supplier_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["api", "suppliers", "{{supplier_id}}"],
                  "variable": [ { "key": "supplier_id", "value": "1" } ]
                }
              }
            }
          ]
        },
        {
          "name": "Items Management",
          "item": [
            {
              "name": "Get All Items",
              "request": {
                "method": "GET",
                "header": [
                   { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/items",
                  "host": ["{{base_url}}"],
                  "path": ["api", "items"]
                }
              }
            },
            {
              "name": "Get Item By ID",
              "request": {
                "method": "GET",
                "header": [
                   { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/items/{{item_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["api", "items", "{{item_id}}"],
                  "variable": [ { "key": "item_id", "value": "1" } ]
                }
              }
            },
            {
              "name": "Create Item",
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{jwt_token}}" },
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"New Item C\",\n  \"quantity\": 50,\n  \"minStockLevel\": 10,\n  \"supplier\": { \"id\": {{supplier_id}} }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/api/items",
                  "host": ["{{base_url}}"],
                  "path": ["api", "items"],
                  "variable": [ { "key": "supplier_id", "value": "1" } ]
                }
              }
            },
            {
              "name": "Update Item",
              "request": {
                "method": "PUT",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{jwt_token}}" },
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Updated Item C\",\n  \"quantity\": 75,\n  \"minStockLevel\": 15,\n  \"supplier\": { \"id\": {{supplier_id}} }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/api/items/{{item_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["api", "items", "{{item_id}}"],
                  "variable": [
                    { "key": "item_id", "value": "1" },
                    { "key": "supplier_id", "value": "1" }
                  ]
                }
              }
            },
            {
              "name": "Delete Item",
              "request": {
                "method": "DELETE",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/items/{{item_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["api", "items", "{{item_id}}"],
                   "variable": [ { "key": "item_id", "value": "1" } ]
                }
              }
            }
          ]
        },
        {
          "name": "Requests Management",
          "item": [
            {
              "name": "Get All Requests",
              "request": {
                "method": "GET",
                "header": [
                   { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/requests",
                  "host": ["{{base_url}}"],
                  "path": ["api", "requests"]
                }
              }
            },
            {
              "name": "Get Request By ID",
              "request": {
                "method": "GET",
                "header": [
                   { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/requests/{{request_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["api", "requests", "{{request_id}}"],
                  "variable": [ { "key": "request_id", "value": "1" } ]
                }
              }
            },
            {
              "name": "Update Request Status",
              "request": {
                "method": "PUT",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{jwt_token}}" },
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"status\": \"APPROVED\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/api/requests/{{request_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["api", "requests", "{{request_id}}"],
                  "variable": [ { "key": "request_id", "value": "1" } ]
                }
              }
            },
            {
              "name": "Delete Request",
              "request": {
                "method": "DELETE",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/requests/{{request_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["api", "requests", "{{request_id}}"],
                  "variable": [ { "key": "request_id", "value": "1" } ]
                }
              }
            }
          ]
        },
        {
          "name": "Notifications Management",
          "item": [
            {
              "name": "Get All Notifications",
              "request": {
                "method": "GET",
                "header": [
                   { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/notifications",
                  "host": ["{{base_url}}"],
                  "path": ["api", "notifications"]
                }
              }
            },
            {
              "name": "Get Notification By ID",
              "request": {
                "method": "GET",
                "header": [
                   { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/notifications/{{notification_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["api", "notifications", "{{notification_id}}"],
                  "variable": [ { "key": "notification_id", "value": "1" } ]
                }
              }
            },
            {
              "name": "Check and Notify Low Stock",
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/notifications/check-low-stock/{{item_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["api", "notifications", "check-low-stock", "{{item_id}}"],
                  "variable": [ { "key": "item_id", "value": "1" } ]
                }
              }
            },
            {
              "name": "Notify Supplier By Email",
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/notifications/notify-supplier/{{item_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["api", "notifications", "notify-supplier", "{{item_id}}"],
                  "variable": [ { "key": "item_id", "value": "1" } ]
                }
              }
            },
            {
              "name": "Delete Notification",
              "request": {
                "method": "DELETE",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/notifications/{{notification_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["api", "notifications", "{{notification_id}}"],
                  "variable": [ { "key": "notification_id", "value": "1" } ]
                }
              }
            }
          ]
        }
      ]
    },
    {
      "name": "3. Worker Workflow",
      "description": "Requires WORKER role. Login first using the 'Login User' request.",
      "item": [
        {
          "name": "View Items",
          "item": [
            {
              "name": "Get All Items",
              "request": {
                "method": "GET",
                "header": [
                   { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/items",
                  "host": ["{{base_url}}"],
                  "path": ["api", "items"]
                }
              }
            },
            {
              "name": "Get Item By ID",
              "request": {
                "method": "GET",
                "header": [
                   { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/items/{{item_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["api", "items", "{{item_id}}"],
                  "variable": [ { "key": "item_id", "value": "1" } ]
                }
              }
            }
          ]
        },
        {
          "name": "Manage Requests",
          "item": [
            {
              "name": "Create Request",
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{jwt_token}}" },
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"item\": { \"id\": {{item_id}} },\n  \"quantity\": 5,\n  \"status\": \"REQUESTED\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/api/requests",
                  "host": ["{{base_url}}"],
                  "path": ["api", "requests"],
                  "variable": [ { "key": "item_id", "value": "1" } ]
                }
              }
            },
            {
              "name": "Get Own Requests (Filter Manually)",
              "request": {
                "method": "GET",
                "header": [
                   { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/requests",
                  "host": ["{{base_url}}"],
                  "path": ["api", "requests"]
                },
                "description": "Gets all requests. Filter client-side or implement /api/requests/my-requests."
              }
            }
          ]
        },
        {
          "name": "Manage Notifications",
          "item": [
            {
              "name": "Get Own Notifications (Filter Manually)",
              "request": {
                "method": "GET",
                "header": [
                   { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/notifications",
                  "host": ["{{base_url}}"],
                  "path": ["api", "notifications"]
                },
                "description": "Gets all notifications for the role. Filter client-side or implement /api/notifications/my-notifications."
              }
            },
             {
              "name": "Trigger Request Notification (Example)",
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
                ],
                "url": {
                  "raw": "{{base_url}}/api/notifications/request-notification/{{request_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["api", "notifications", "request-notification", "{{request_id}}"],
                  "variable": [ { "key": "request_id", "value": "1" } ]
                },
                "description": "Notifies workers about a request. Called internally or manually for testing."
              }
            }
          ]
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "jwt_token",
      "value": "",
      "type": "string",
      "description": "JWT token obtained from login request. Use the 'Login User' request to set this."
    },
    {
      "key": "item_id",
      "value": "1",
      "type": "string",
      "description": "Placeholder for item ID"
    },
     {
      "key": "supplier_id",
      "value": "1",
      "type": "string",
      "description": "Placeholder for supplier ID"
    },
     {
      "key": "request_id",
      "value": "1",
      "type": "string",
      "description": "Placeholder for request ID"
    },
     {
      "key": "notification_id",
      "value": "1",
      "type": "string",
      "description": "Placeholder for notification ID"
    }
  ]
}
